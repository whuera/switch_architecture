<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>
        <%= title %>
    </title>
    <link rel="stylesheet" href="/css/index.css">
</head>

<body>

    <!-- GitHub Top Header -->
    <header class="github-header">
        <div class="header-left">
            <button class="menu-toggle">‚ò∞</button>
            <a href="/" class="logo">
                <svg height="32" width="32" viewBox="0 0 16 16" fill="currentColor">
                    <path
                        d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
                    </path>
                </svg>
            </a>
            <div class="repo-path">
                <a href="#" class="repo-owner">B24-eps and UPF</a>
                <span class="separator">/</span>
                <a href="#" class="repo-name">Consulting</a>
            </div>
        </div>

        <div class="header-center">
            <div class="search-bar">
                <input type="text" placeholder="Type / to search">
            </div>
        </div>

        <div class="header-right">
            <button class="header-btn">+</button>
            <button class="header-btn">üîî</button>
            <div class="user-avatar">üë§</div>
        </div>
    </header>

    <!-- GitHub Navigation Tabs -->
    <nav class="github-nav">
        <div class="nav-container">
            <a href="#" class="nav-item active">
                <span class="nav-icon">üìù</span>
                Arquitectura
            </a>
            <a href="#" class="nav-item">
                <span class="nav-icon">‚ö†Ô∏è</span>
                Issues
            </a>
            <a href="#" class="nav-item">
                <span class="nav-icon">üîÄ</span>
                Pull requests
            </a>
            <a href="#" class="nav-item">
                <span class="nav-icon">‚ñ∂Ô∏è</span>
                Actions
            </a>
            <a href="#" class="nav-item" id="componentes-nav">
                <span class="nav-icon">üîß</span>
                Componentes
            </a>
            <a href="https://deepwiki.com/whuera/switch_architecture" class="nav-item" target="_blank"
                rel="noopener noreferrer">
                <span class="nav-icon">üìö</span>
                Wiki
            </a>
            <a href="#" class="nav-item">
                <span class="nav-icon">üîí</span>
                Security
            </a>
            <a href="#" class="nav-item">
                <span class="nav-icon">üìä</span>
                Insights
            </a>
            <a href="#" class="nav-item">
                <span class="nav-icon">‚öôÔ∏è</span>
                Settings
            </a>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="content-wrapper">
        <div class="github-container">

            <!-- Main Content Area -->
            <main class="main-area">

                <!-- Inicio Section (Default view) -->
                <div id="inicio-section" class="inicio-section">
                    <div class="inicio-card">
                        <h2>üè† Inicio</h2>
                        <div class="inicio-content">
                            <img src="/images/arquitectura-diagram.png" alt="Diagrama de Arquitectura"
                                class="arquitectura-diagram">
                        </div>

                        <div class="description-content">
                            <br>
                            <p class="intro-text">
                                Cuando una transacci√≥n financiera (ATM, POS, e-commerce o ISO8583) llega a BASE24-eps,
                                √©sta
                                sigue una serie de pasos ordenados y modulares que garantizan validaci√≥n, enrutamiento,
                                autorizaci√≥n y retorno seguro al canal originador.
                            </p>

                            <div class="step-section">
                                <h3>‚úÖ 1. Llegada al Originator</h3>
                                <p>La transacci√≥n ingresa por un <strong>Originator process</strong> (ISOORI, ATMORI,
                                    POSORI, HISOORI).</p>
                                <p>Este componente:</p>
                                <ul>
                                    <li>Recibe el mensaje desde el canal.</li>
                                    <li>Valida formato, MTI, longitudes y campos m√≠nimos.</li>
                                    <li>Lo parsea seg√∫n el Message Profile.</li>
                                    <li>Lo convierte a un Transaction Entity interno.</li>
                                    <li>Es la puerta de entrada al ecosistema eps.</li>
                                </ul>
                            </div>

                            <div class="step-section">
                                <h3>‚úÖ 2. Journalizaci√≥n inicial</h3>
                                <p>Antes de procesarse, el mensaje se registra en el <strong>Journal Service</strong>,
                                    asegurando trazabilidad y capacidad de recuperaci√≥n ante fallas.</p>
                            </div>

                            <div class="step-section">
                                <h3>‚úÖ 3. Determinaci√≥n del enrutamiento (Routing Engine)</h3>
                                <p>BASE24-eps decide qu√© hacer con la transacci√≥n usando dos capas:</p>

                                <h4>a) Source Routing (SRC_RTE)</h4>
                                <p>Eval√∫a:</p>
                                <ul>
                                    <li>PAN / BIN</li>
                                    <li>Tipo de transacci√≥n</li>
                                    <li>Canal (ATM, POS, Switch externo)</li>
                                    <li>Institution ID</li>
                                </ul>
                                <p>Y produce un <strong>Route Code</strong>, que representa la l√≥gica de destino.</p>

                                <h4>b) Destination Routing (DST_RTE)</h4>
                                <p>Determina si la transacci√≥n se autoriza:</p>
                                <ul>
                                    <li><strong>On-Us</strong> (autorizaci√≥n interna)</li>
                                    <li>En un <strong>host externo</strong> (core del banco)</li>
                                    <li>En un <strong>switch internacional</strong> (Visa, MC, Plus, Redbanc)</li>
                                </ul>
                                <p>Tambi√©n define fallback, reintentos, prioridades y formato del mensaje hacia el
                                    destino.
                                </p>
                            </div>

                            <div class="step-section">
                                <h3>‚úÖ 4. Env√≠o a Autorizaci√≥n (AUTH)</h3>
                                <p>El Originator entrega la transacci√≥n ya normalizada a <strong>AUTH</strong>, el motor
                                    de
                                    autorizaci√≥n.</p>
                                <p>AUTH determina el entorno de autorizaci√≥n (Authorization Environment) y aplica:</p>
                                <ul>
                                    <li>Validaci√≥n del PIN y MAC</li>
                                    <li>Reglas EMV (ARQC, TVR, CVR)</li>
                                    <li>L√≠mites de cliente</li>
                                    <li>Reglas de riesgo</li>
                                    <li>Comportamiento On-Us o External Host</li>
                                </ul>
                            </div>

                            <div class="step-section">
                                <h3>üîµ 5. Autorizaci√≥n Interna o Externa</h3>

                                <h4>Autorizaci√≥n On-Us (Interna)</h4>
                                <p>eps ejecuta validaciones propias del banco, y decide aprobar o rechazar.</p>

                                <h4>Autorizaci√≥n mediante Host Externo</h4>
                                <p>Si requiere consulta a un sistema externo:</p>
                                <ul>
                                    <li>AUTH env√≠a el mensaje a trav√©s del <strong>Message Delivery Service
                                            (MDS)</strong>.
                                    </li>
                                    <li>MDS entrega al host externo y espera la respuesta.</li>
                                    <li>Devuelve la respuesta a AUTH, incluso aplicando conversiones de formato.</li>
                                </ul>
                                <p>MDS garantiza:</p>
                                <ul>
                                    <li>Delivery confiable</li>
                                    <li>Retransmisiones</li>
                                    <li>Timeouts administrados</li>
                                    <li>Balanceo entre destinos</li>
                                </ul>
                            </div>

                            <div class="step-section">
                                <h3>‚úÖ 6. Procesamiento de la Respuesta</h3>
                                <p>AUTH recibe la respuesta (interna o externa) y:</p>
                                <ul>
                                    <li>Aplica el <strong>Action Code Profile</strong> para definir el c√≥digo final.
                                    </li>
                                    <li>Ajusta datos seg√∫n el <strong>Issuer Profile</strong>.</li>
                                    <li>Actualiza el Journal con el resultado.</li>
                                </ul>
                            </div>

                            <div class="step-section">
                                <h3>‚úÖ 7. Construcci√≥n de la respuesta y env√≠o al canal</h3>
                                <p>El Originator arma el mensaje final:</p>
                                <ul>
                                    <li>MTI de respuesta</li>
                                    <li>Campos obligatorios (ISO8583 o propietario)</li>
                                    <li>Datos EMV si aplica</li>
                                    <li>Conversi√≥n a formato nativo del canal (ATM/POS)</li>
                                </ul>
                                <p>Luego:</p>
                                <ul>
                                    <li>Se registra el cierre en el Journal.</li>
                                    <li>Se env√≠a la respuesta al canal originador (ATM, POS, app, switch).</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Arquitectura B24 eps Section (Hidden by default) -->
                <div id="arquitectura-section" class="arquitectura-section" style="display: none;">
                    <div class="arquitectura-card">
                        <h2>Arquitectura B24 eps</h2>
                        <p>Esta es la secci√≥n de Arquitectura B24 eps del proyecto.</p>
                        <div class="arquitectura-content">
                            <div class="info-grid">
                                <div class="info-item">
                                    <h3>üìê Dise√±o</h3>
                                    <p>Arquitectura modular y escalable</p>
                                </div>
                                <div class="info-item">
                                    <h3>üîß Componentes</h3>
                                    <p>Sistema de componentes reutilizables</p>
                                </div>
                                <div class="info-item">
                                    <h3>üìä Estructura</h3>
                                    <p>Organizaci√≥n clara y mantenible</p>
                                </div>
                                <div class="info-item">
                                    <h3>üöÄ Rendimiento</h3>
                                    <p>Optimizado para producci√≥n</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Componentes B24 Section (Hidden by default) -->
                <div id="componentes-section" class="componentes-section" style="display: none;">
                    <div class="componentes-card">
                        <h2>üîß Componentes B24</h2>
                        <p>Sistema de componentes reutilizables</p>
                        <div class="componentes-content">
                            <div class="info-grid">
                                <div class="info-item">
                                    <h3>üß© UI Components</h3>
                                    <p>Componentes de interfaz de usuario</p>
                                </div>
                                <div class="info-item info-item-clickable" id="core-modules-link">
                                    <h3>üì¶ Core Modules</h3>
                                    <p>M√≥dulos principales del sistema</p>
                                </div>
                                <div class="info-item">
                                    <h3>üîå API Integration</h3>
                                    <p>Integraci√≥n con servicios externos</p>
                                </div>
                                <div class="info-item">
                                    <h3>üìö Documentation</h3>
                                    <p>Documentaci√≥n completa de componentes</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modulos B24 eps Section (Hidden by default) -->
                <div id="modulos-section" class="modulos-section" style="display: none;">
                    <div class="modulos-card">
                        <h2>üì¶ Core Modules</h2>
                        <p>M√≥dulos principales del sistema</p>
                    </div>
                </div>

            </main>

        </div>
    </div>

    <!-- Footer -->
    <footer class="custom-footer">
        <div class="footer-top">
            <div class="footer-left-contact">
                <span class="contact-item">
                    <span class="icon">‚úâÔ∏è</span> whuera@gmail.com
                </span>
                <span class="contact-item">
                    <span class="icon">üåê</span> +56 985689661
                    <span class="icon">üåê</span> +593 995331328
                </span>
            </div>

            <div class="footer-center-logo">
                <div class="logo-text">WRFRM</div>
                <div class="logo-subtext">WIREFRAME KIT</div>
            </div>

            <div class="footer-right-social">
                <a href="#" class="social-icon">f</a>
                <a href="#" class="social-icon">üê¶</a>
                <a href="#" class="social-icon">üì∑</a>
            </div>
        </div>

        <div class="footer-separator"></div>

        <div class="footer-bottom">
            <div class="footer-nav-links">
                <a href="#">WORK</a>
                <a href="#">SERVICE</a>
                <a href="#">ABOUT</a>
                <a href="#">BLOG</a>
                <a href="#">CONTACT</a>
            </div>

            <div class="footer-copyright">
                &copy; <span id="year"></span> Switch Architecture.
            </div>
        </div>
    </footer>

    <script src="/js/index.js"></script>
    <script>
        // Toggle Sections
        document.addEventListener('DOMContentLoaded', function () {
            const arquitecturaNav = document.querySelector('.nav-item.active');
            const componentesNav = document.getElementById('componentes-nav');
            const arquitecturaSection = document.getElementById('arquitectura-section');
            const componentesSection = document.getElementById('componentes-section');
            const modulosSection = document.getElementById('modulos-section');
            const inicioSection = document.getElementById('inicio-section');

            function hideAllSections() {
                if (arquitecturaSection) arquitecturaSection.style.display = 'none';
                if (componentesSection) componentesSection.style.display = 'none';
                if (modulosSection) modulosSection.style.display = 'none';
                if (inicioSection) inicioSection.style.display = 'none';
            }

            function showInicioSection() {
                if (inicioSection) inicioSection.style.display = 'block';
            }

            // Toggle Arquitectura Section
            if (arquitecturaNav) {
                arquitecturaNav.addEventListener('click', function (e) {
                    e.preventDefault();

                    if (arquitecturaSection.style.display === 'none' || arquitecturaSection.style.display === '') {
                        hideAllSections();
                        arquitecturaSection.style.display = 'block';
                    } else {
                        hideAllSections();
                        showInicioSection();
                    }
                });
            }

            // Toggle Componentes Section
            if (componentesNav) {
                componentesNav.addEventListener('click', function (e) {
                    e.preventDefault();

                    if (componentesSection.style.display === 'none' || componentesSection.style.display === '') {
                        hideAllSections();
                        componentesSection.style.display = 'block';
                    } else {
                        hideAllSections();
                        showInicioSection();
                    }
                });
            }

            // Toggle Modulos Section from Core Modules link
            const coreModulesLink = document.getElementById('core-modules-link');

            if (coreModulesLink && modulosSection) {
                coreModulesLink.addEventListener('click', function (e) {
                    e.preventDefault();
                    hideAllSections();
                    modulosSection.style.display = 'block';
                });
            }

            // Set current year in footer
            const yearSpan = document.getElementById('year');
            if (yearSpan) {
                yearSpan.textContent = new Date().getFullYear();
            }
        });
    </script>
</body>

</html>